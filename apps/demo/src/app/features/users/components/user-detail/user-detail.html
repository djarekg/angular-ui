<form>

  <mat-card appearance="filled">
    <mat-card-subtitle>
      Contact
      <mat-slide-toggle #activeToggle
                        class="app-acive"
                        [matTooltip]="activeToggle.checked ? 'Customer is active' : 'Customer is inactive'"
                        [control]="form.isActive" />
    </mat-card-subtitle>
    <mat-card-content>
      <section class="name">
        <mat-form-field>
          <mat-label>First name</mat-label>
          <input matInput
                 [control]="form.firstName"
                 autocomplete="firstName" />
          @if (form.firstName().errors().length) {
          <mat-error>{{ form.firstName().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Last name</mat-label>
          <input matInput
                 [control]="form.lastName"
                 autocomplete="lastName" />
          @if (form.lastName().errors().length) {
          <mat-error>{{ form.lastName().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Gender</mat-label>
          <mat-select [control]="form.gender">
            <mat-option value="MALE">Male</mat-option>
            <mat-option value="FEMALE">Female</mat-option>
            <mat-option value="PREFERNOTTOSAY">Prefer not to say</mat-option>
          </mat-select>
        </mat-form-field>
      </section>

      <section class="contact">
        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput
                 [control]="form.email"
                 autocomplete="email" />
          @if (form.email().errors().length) {
          <mat-error>{{ form.email().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Phone</mat-label>
          <input matInput
                 [control]="form.phone"
                 autocomplete="phone" />
          @if (form.phone().errors().length) {
          <mat-error>{{ form.phone().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
      </section>
    </mat-card-content>
  </mat-card>

  <mat-card appearance="filled">
    <mat-card-subtitle>
      Address
    </mat-card-subtitle>
    <mat-card-content>
      <section class="address">
        <mat-form-field>
          <mat-label>Street address</mat-label>
          <input matInput
                 [control]="form.streetAddress"
                 autocomplete="streetAddress" />
          @if (form.streetAddress().errors().length) {
          <mat-error>{{ form.streetAddress().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
      </section>

      <section class="address2">
        <mat-form-field>
          <mat-label>Street address2</mat-label>
          <input matInput
                 [control]="form.streetAddress2"
                 autocomplete="streetAddress2" />
        </mat-form-field>
      </section>

      <section class="location">
        <mat-form-field class="city">
          <mat-label>City</mat-label>
          <input matInput
                 [control]="form.city"
                 autocomplete="city" />
          @if (form.city().errors().length) {
          <mat-error>{{ form.city().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="state">
          <mat-label>State</mat-label>
          <app-state-select [control]="form.stateId" />
          @if (form.stateId().errors().length) {
          <mat-error>{{ form.stateId().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="zip">
          <mat-label>Zip</mat-label>
          <input matInput
                 [control]="form.zip"
                 autocomplete="zip" />
          @if (form.zip().errors().length) {
          <mat-error>{{ form.zip().errors()[0].message }}</mat-error>
          }
        </mat-form-field>
      </section>
    </mat-card-content>
  </mat-card>

</form>

<footer>
  @if (isEditing()) {
  <button matButton="outlined"
          color="primary"
          (click)="onCancel()">
    Cancel
  </button>
  <button matButton="outlined"
          color="primary"
          (click)="onSave($event)">
    Save
  </button>
  }
  @else if (isNew()) {
  <button class="new-user"
          matButton="filled"
          color="primary"
          (click)="onNew()">
    New User
  </button>
  }
  @else {
  <button matButton="outlined"
          color="primary"
          (click)="onEdit()">
    Edit
  </button>
  }
</footer>
