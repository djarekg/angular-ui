@defer (when dataSource.data.length) {
<mat-table matSort
           class="app-table app-selectable"
           [dataSource]="dataSource">

  <ng-container matColumnDef="firstName">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header> First Name </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.firstName }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="lastName">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header> Last Name </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.lastName }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="city">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header> City </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.city }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="stateId">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header> State </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.state.code }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="dateCreated">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header
                     justify="end"> Created </mat-header-cell>
    <mat-cell *matCellDef="let row"
              justify="end"> {{ row.dateCreated | date:'yyyy-MM-dd' }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="isActive">
    <mat-header-cell *matHeaderCellDef
                     mat-sort-header> Active </mat-header-cell>
    <mat-cell *matCellDef="let row">
      @if (row.isActive) {
      <mat-icon>
        check
      </mat-icon>
      }
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="view">
    <mat-header-cell *matHeaderCellDef> </mat-header-cell>
    <mat-cell *matCellDef="let row">
      <a [routerLink]="[row.id]"
         matTooltip="View Details">
        <mat-icon>open_in_new</mat-icon>
      </a>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true" />
  <mat-row *matRowDef="let row; columns: columnsToDisplay" />

</mat-table>
}
@loading (minimum 1s) {
<app-table-skeleton rows="7"
                    columns="3" />
}
