<form [formGroup]="form">
  <header>
    <span class="user-id">
      @if (!isNew()) {
      ID: {{ user()?.id }}
      }
    </span>
    <mat-button-toggle-group aria-label="Is actvie"
                             value="{{ user()?.isActive }}"
                             [disabled]="!isEditing()"
                             (change)="onIsActiveToggleChange($event.value)">
      <mat-button-toggle value="true">Active</mat-button-toggle>
      <mat-button-toggle value="false">Inactive</mat-button-toggle>
    </mat-button-toggle-group>
  </header>

  <h4>Contact</h4>
  <section class="name">
    <mat-form-field>
      <mat-label>First name</mat-label>
      <input matInput
             formControlName="firstName"
             autocomplete="firstName" />
      @if (form.get('firstName')?.hasError('required')) {
      <mat-error>
        First name is required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Last name</mat-label>
      <input matInput
             formControlName="lastName"
             autocomplete="lastName" />
      @if (form.get('lastName')?.hasError('required')) {
      <mat-error>
        Last name is required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Gender</mat-label>
      <mat-select formControlName="gender">
        <mat-option value="MALE">Male</mat-option>
        <mat-option value="FEMALE">Female</mat-option>
        <mat-option value="PREFERNOTTOSAY">Prefer not to say</mat-option>
      </mat-select>
    </mat-form-field>
  </section>

  <section class="contact">
    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput
             formControlName="email"
             autocomplete="email" />
      @if (form.get('email')?.hasError('required')) {
      <mat-error>
        Email is required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Phone</mat-label>
      <input matInput
             formControlName="phone"
             autocomplete="phone" />
      @if (form.get('phone')?.hasError('required')) {
      <mat-error>
        Phone is required
      </mat-error>
      }
    </mat-form-field>
  </section>

  <h4>Address</h4>
  <section class="address">
    <mat-form-field>
      <mat-label>Street address</mat-label>
      <input matInput
             formControlName="streetAddress"
             autocomplete="streetAddress" />
      @if (form.get('streetAddress')?.hasError('required')) {
      <mat-error>
        Street address is required
      </mat-error>
      }
    </mat-form-field>
  </section>

  <section class="address2">
    <mat-form-field>
      <mat-label>Street address2</mat-label>
      <input matInput
             formControlName="streetAddress2"
             autocomplete="streetAddress2" />
    </mat-form-field>
  </section>

  <section class="location">
    <mat-form-field class="city">
      <mat-label>City</mat-label>
      <input matInput
             formControlName="city"
             autocomplete="city" />
      @if (form.get('city')?.hasError('required')) {
      <mat-error>
        City is required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field class="state">
      <mat-label>State</mat-label>
      <app-state-select formControlName="stateId" />
      @if (form.get('stateId')?.hasError('required')) {
      <mat-error>
        State is required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field class="zip">
      <mat-label>Zip</mat-label>
      <input matInput
             formControlName="zip"
             autocomplete="zip" />
      @if (form.get('zip')?.hasError('required')) {
      <mat-error>
        Zip is required
      </mat-error>
      }
    </mat-form-field>
  </section>

  <footer>
    <button class="new-user"
            matButton="filled"
            color="primary"
            [hidden]="isEditing()"
            (click)="onNew()">
      New User
    </button>
    <button matButton="outlined"
            color="primary"
            [hidden]="isEditing()"
            (click)="onEdit()">
      Edit
    </button>
    <button matButton="outlined"
            color="primary"
            [hidden]="!isEditing()"
            (click)="onCancel()">
      Cancel
    </button>
    <button matButton="outlined"
            color="primary"
            [hidden]="!isEditing()"
            (click)="onSave()">
      Save
    </button>
  </footer>
</form>
